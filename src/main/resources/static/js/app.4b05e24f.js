(function(){var e={3526:function(e,t,a){"use strict";a(7658);var o=a(6369),s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("Navigate",{directives:[{name:"show",rawName:"v-show",value:"LoginUser"!==this.pageName,expression:"this.pageName!=='LoginUser'"}]}),e.isRouterAlive?t("router-view",{style:"min-height:"+e.minHeight+"px"}):e._e()],1)},i=[],r=function(){var e=this,t=e._self._c;return t("el-header",{staticClass:"header",style:`left:-${e.scrollLeft}px`},[t("el-menu",{staticClass:"nav el-menu-demo menu",attrs:{"default-active":e.activeIndex,mode:"horizontal","background-color":"#409EFF","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:e.handleSelect}},[e.isTeacher?e._e():t("el-menu-item",{attrs:{index:"submit"}},[t("template",{slot:"title"},[e._v("提交作业")])],2),e.isTeacher?t("el-menu-item",{attrs:{index:"manage"}},[t("template",{slot:"title"},[e._v("查看作业")])],2):e._e(),t("div",{staticClass:"login-link"},[e.showUser?t("div",{staticClass:"link-format"},[t("el-link",{attrs:{underline:!1},on:{click:function(t){return e.logoutUser()}}},[t("span",[e._v(e._s(e.username)+" | 退出登录")])])],1):e._e()])],1)],1)},l=[];let n="http://127.0.0.1:866/";const u={userLogin:"user/login",userLogout:"user/logout",getUserWorks:"work/user/list",uploadImage:"work/image",deleteImage:"work/image",uploadVideo:"work/video",deleteVideo:"work/video",taskCount:"task/count",userList:"user/list",getUserWorksByTeacher:"work/user/list/"};Object.keys(u).forEach((e=>{u[e]=n+u[e]}));var d=u,c=a(3822);o["default"].use(c.ZP);const g={username:null,token:null,isTeacher:!1};var m=new c.ZP.Store({state:g,getters:{token:e=>e.token,username:e=>e.username,isTeacher:e=>e.isTeacher},mutations:{set_token(e,t){e.token=t},del_token(e){e.token="",e.username="",e.isTeacher=!1,localStorage.removeItem("Authorization"),localStorage.removeItem("username"),localStorage.removeItem("isTeacher")},set_username(e,t){e.username=t},set_isTeacher(e,t){e.isTeacher=t}},actions:{},modules:{}}),p={name:"Navigate",data(){return{activeIndex:"submit",scrollLeft:"",showUser:!1,username:"",isTeacher:!1}},methods:{handleSelect(e,t){console.log("key:",e,"keyPath:",t),this.activeIndex=e,this.$router.push("/"+e)},handleScroll(){this.scrollLeft=document.documentElement.scrollLeft||document.body.scrollLeft},logoutUser(){this.username="",this.showUser=!1,this.$axios.post(d.userLogout).then((()=>{m.commit("del_token"),this.$router.push({name:"LoginUser"}),location.reload()}))},refreshUsername(){let e=localStorage.getItem("username");null!=e?(this.username=e,this.showUser=!0):this.showUser=!1,this.isTeacher="true"===localStorage.getItem("isTeacher")}},destroyed(){window.removeEventListener("scroll",this.handleScroll)},mounted(){this.refreshUsername()},watch:{$route(){null===m.state.token&&"LoginUser"!==this.$route.name&&(console.log("&& this.$route.name：",this.$route.name),this.$router.push("/404")),this.activeIndex=this.$route.name,console.log(this.activeIndex),this.refreshUsername()}}},h=p,f=a(1001),v=(0,f.Z)(h,r,l,!1,null,"840bb25e",null),b=v.exports,w={name:"App",data(){return{isRouterAlive:!0,minHeight:document.documentElement.clientHeight,show:!0,pageName:null}},components:{Navigate:b},mounted(){this.pageName=this.$route.name,console.log("this.$route.name:",this.$route.name)},watch:{$route(){this.pageName=this.$route.name}}},y=w,A=(0,f.Z)(y,s,i,!1,null,null,null),C=A.exports,k=a(2631),U=function(){var e=this,t=e._self._c;return t("el-container",[t("el-main",{staticClass:"login-main"},[t("div",{staticClass:"login-box"},[t("div",{staticClass:"login-title-text"},[e._v("用户登录")]),t("div",{staticClass:"login-form"},[t("el-form",{ref:"resetForm",attrs:{model:e.loginForm,rules:e.loginRules}},[t("el-form-item",{staticClass:"password-form",attrs:{prop:"username"}},[t("el-image",{staticClass:"login-icon icon-size",attrs:{src:e.userIcon}}),t("el-input",{staticClass:"info-input",attrs:{placeholder:"账号",clearable:"",autocomplete:"new-password"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),t("el-form-item",{staticClass:"password-form",attrs:{prop:"password"}},[t("el-image",{staticClass:"login-icon icon-size",attrs:{src:e.keyIcon}}),t("el-input",{staticClass:"info-input",attrs:{placeholder:"密码",clearable:"","show-password":"",autocomplete:"new-password"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1)],1),t("div",{staticClass:"login_op"},[t("el-button",{staticClass:"register_btn",attrs:{type:"primary"},on:{click:function(t){return e.loginUser(e.loginForm)}}},[e._v("登录")])],1)],1)])])],1)},T=[],I="data:image/png;base64,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",x="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAtxJREFUaEPtmD1oFFEQx//zzkAsUp53awK5vTQSyW4ORdBKEWMTP9BOQRsLPxpLtTE2amnjR2GjoJ3iRxojopWCKJfdYLDJ7QUS99YrUxiI90buvE1CMLefhyzsqw5u5j/zmxne2/cICV+U8PyRAvzvDsbage/1et/y0spxEhmNGBqD9SYggQwmmCwbZm9fz4sd2exSXOCxARjztYOQuAlgj0dynyFwTR/Mv4sDIhaAacu+T6DzQRJi8INRVbkQxOdftpEBjErtJwjZNXEug8RDyXKWe/GtNULL2ClIDIPlOYBKq7aMul7Mb4sCEQnAqNh3QXTRTYBAbzU1N9YpIdNyphh8aA2C7+lF5VJYiNAAZcveL0Dv15LHbU3NX/WTiGnVbjFwxbWV4AMlVfngx3ejTWgAw6q9BHC0LfhUV/OngyRgWLUnAE61fV7pav5YEP91hQvjBhhVZxHM2wH8kuDhkqpUgyiVLbsgQLMAtoLoh17I9QfxjwRgzjtFljzX3uNNTc219vugy7Qcg8FaS0fQkDaYqwTVCDVCM/P1cSkbr/8G4+e6qpwMGrhpb1j2M4BONH8LkTkyMpidDKoTCqA8Z08IQdebwaTkG6UhZSJo4KZ9HDopQNqBiKPoe4SMin0GQoxDyr0gGggz854+zAsQ4hOknNSLymNP+9aXro9lWM4XgHf5MI3RhL7qam63l6AnwIYT00sv7v89T/iOADMVJyeJa+tOvTsN/H5UUgem4860ta1aC6MZbDnLwGVXXzDlR4o5Z7N4HQGmK4tjRJk3bedqD2X2DReydjeSdzVnq3VlhRsfARRaxyQ3Do8W+6dCAcRx0ISBDRK3YweCCIVJdDOfIHFTgDgr72qlHQhTiTg7kXYg7UDEeUpHKB2hdIT8PxqknxIRp+Wf7uku5JYl8ReaxF8pm51I9KXeHaVEP6usQiT5YasbW2Vcmp4PW3EF6pZOCtCtyvrV/QNA1DdPRLvjOgAAAABJRU5ErkJggg==",D={name:"UserLogin",components:{},data(){return{isPwd:!0,userIcon:I,keyIcon:x,loginForm:{username:"",password:""},loginRules:{username:[{required:!0,message:"请输入账号",trigger:"change"}],password:[{required:!0,message:"请输入密码",trigger:"change"},{validator:this.validatePassword,trigger:"blur"}]}}},mounted(){},methods:{validatePassword(e,t,a){if(""!==t){if(t.length<4)return a(new Error("请输入至少4位的密码")),!1;a()}},loginUser(e){let t=new FormData;t.append("username",e.username),t.append("password",e.password),e.username&&e.password?this.$axios.post(d.userLogin,t).then((e=>{200===e.data.code?(window.console.log("red.data:",e.data),localStorage.setItem("Authorization",e.data.data.token),localStorage.setItem("username",e.data.data.username),localStorage.setItem("isTeacher",e.data.data.is_teacher),m.commit("set_token",e.data.data.token),m.commit("set_username",e.data.data.username),m.commit("set_isTeacher",e.data.data.is_teacher),e.data.data.is_teacher?this.$router.push({name:"manage"}):this.$router.push({name:"submit"})):this.$message.error(e.data.msg?e.data.msg:"用户名或密码错误")})):this.$message.error("请输入账号信息")}}},V=D,S=(0,f.Z)(V,U,T,!1,null,"42a6850c",null),R=S.exports,E=function(){var e=this,t=e._self._c;return t("el-container",[t("el-main",{staticClass:"main-container"},[t("el-table",{staticClass:"submit-table",attrs:{border:"",data:e.tableData}},[t("el-table-column",{attrs:{label:"温度",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[e._v(" "+e._s(a.row.temp)+" ℃ ")])]}}])}),t("el-table-column",{attrs:{label:"图片",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-upload",{staticClass:"upload-demo",attrs:{action:"",data:{tuid:a.row.tuid},"on-preview":e.handlePreview,"http-request":t=>e.handleUploadFile(t,e.imageType),"on-remove":t=>e.handleRemove(t,a.row.tuid,e.imageType),"before-remove":t=>e.beforeRemove(t,e.imageType),limit:1,"on-exceed":e.handleExceed,"before-upload":t=>e.handleBeforeUpload(t,e.imageType),accept:".jpg,.png","file-list":a.row.imageList}},[t("el-button",{attrs:{size:"small",type:"warning",disabled:null!=a.row.imageUrl}},[e._v("上传照片")]),t("div",{directives:[{name:"show",rawName:"v-show",value:null==a.row.imageUrl,expression:"scope.row.imageUrl == null"}],staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过2MB")])],1)]}}])}),t("el-table-column",{attrs:{label:"视频",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-upload",{staticClass:"upload-demo",attrs:{action:"",data:{tuid:a.row.tuid},"on-preview":e.handleVideoPreview,"http-request":t=>e.handleUploadFile(t,e.videoType),"on-remove":t=>e.handleRemove(t,a.row.tuid,e.videoType),"before-remove":t=>e.beforeRemove(t,e.videoType),limit:1,"on-exceed":e.handleExceed,"before-upload":t=>e.handleBeforeUpload(t,e.videoType),accept:".mp4","file-list":a.row.videoList}},[t("el-button",{attrs:{size:"small",type:"danger",disabled:null!=a.row.videoUrl}},[e._v("上传视频")]),t("div",{directives:[{name:"show",rawName:"v-show",value:null==a.row.videoUrl,expression:"scope.row.videoUrl == null"}],staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传mp4文件，且不超过50MB")])],1)]}}])})],1),t("el-dialog",{attrs:{visible:e.dialogVisibleImg},on:{"update:visible":function(t){e.dialogVisibleImg=t}}},[t("img",{staticStyle:{display:"block"},attrs:{width:"100%",height:"100%",src:e.dialogImageUrl}})]),t("el-dialog",{attrs:{visible:e.dialogVisibleVideo},on:{"update:visible":function(t){e.dialogVisibleVideo=t}}},[t("video-player",{ref:"videoPlayer",staticClass:"vjs-custom-skin videoPlayer",attrs:{options:e.playerOptions,playsinline:!0}})],1)],1)],1)},N=[],P={name:"SubmitPage",data(){return{tableData:[{temp:"",imageUrl:"",videoUrl:"",tuid:null,id:null}],dialogVisibleImg:!1,dialogVisibleVideo:!1,dialogImageUrl:null,videoType:"video",imageType:"image",playerOptions:{playbackRates:[.7,1,1.5,2],autoplay:!1,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"video/mp4",src:""}],poster:"",width:800,notSupportedMessage:"此视频暂无法播放，请稍后再试"}}},methods:{handleRemove(e,t,a){if(e&&"success"===e.status){let e="image"===a?d.deleteImage:d.deleteVideo;this.$axios.delete(e,{params:{tuid:t}}).then((e=>{e.data.code?(this.$message.success(e.data.msg),this.handleRefreshTable()):this.$message.error(e.data.msg)}))}},handlePreview(e){console.log(e),this.dialogImageUrl=e.url,this.dialogVisibleImg=!0},handleExceed(){this.$message.warning("只能上传 1 个图片文件")},beforeRemove(e,t){if(t===this.imageType){if(!this.handleImageFormatJudge(e))return!0}else if(!this.handleVideoFormatJudge(e))return!0;return this.$confirm(`确定移除 ${e.name}？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})},handleUploadFile(e,t){let a="image"===t?d.deleteImage:d.deleteVideo,o=new FormData;o.append("tuid",e.data.tuid),o.append("file",e.file),this.$axios.post(a,o).then((e=>{console.log("res11:",e),200===e.data.code?(this.$message.success(e.data.msg),this.handleRefreshTable()):this.$message.warning(e.data.msg)}))},handleRefreshTable(){this.$axios.get(d.getUserWorks,{}).then((e=>{console.log("res:",e),200===e.data.code&&(this.tableData=e.data.data,this.tableData.forEach((e=>{if(null!=e.imageUrl){e.imageList=[];let t=e.imageUrl.substring(e.imageUrl.lastIndexOf("/")+1,e.imageUrl.length);e.imageList.push({name:t,url:e.imageUrl})}if(null!=e.videoUrl){e.videoList=[];let t=e.videoUrl.substring(e.videoUrl.lastIndexOf("/")+1,e.videoUrl.length);e.videoList.push({name:t,url:e.videoUrl})}})))}))},handleBeforeUpload(e,t){let a;return a=t===this.imageType?this.handleImageFormatJudge(e):this.handleVideoFormatJudge(e),a||(t===this.imageType?this.$message.error("上传图片只能是jpg、png格式，且大小小于2MB"):t===this.videoType&&this.$message.error("上传视频只能是mp4格式，且大小小于50MB")),a},handleImageFormatJudge(e){const t=e.name.substring(e.name.lastIndexOf(".")+1),a=["jpg","png"];return-1!==a.indexOf(t)&&e.size/1024/1024<2},handleVideoFormatJudge(e){const t=e.name.substring(e.name.lastIndexOf(".")+1),a=["mp4"];return-1!==a.indexOf(t)&&e.size/1024/1024<50},handleVideoPreview(e){this.playerOptions.sources[0].src=e.url,this.dialogVisibleVideo=!0}},mounted(){this.handleRefreshTable()}},_=P,z=(0,f.Z)(_,E,N,!1,null,"78052824",null),O=z.exports,B=function(){var e=this,t=e._self._c;return t("el-container",[t("el-main",{staticClass:"main-container"},[t("el-table",{staticClass:"manage-table",attrs:{data:e.tableData,border:""}},[t("el-table-column",{attrs:{prop:"name",label:"姓名",align:"center"}}),t("el-table-column",{attrs:{prop:"imageCount",label:"照片作业进度"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[t("el-progress",{attrs:{percentage:a.row.imageCount>0?Math.ceil(a.row.imageCount/e.taskCount*100):0,color:e.customColors}})],1)]}}])}),t("el-table-column",{attrs:{prop:"videoCount",label:"视频作业进度"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[t("el-progress",{attrs:{percentage:a.row.videoCount>0?Math.ceil(a.row.videoCount/e.taskCount*100):0,color:e.customColors}})],1)]}}])}),t("el-table-column",{attrs:{label:"操作",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleViewWork(a.row.id,a.row.name)}}},[e._v("查看作业详情")])]}}])})],1),t("el-pagination",{staticClass:"pagination",attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:"total, prev, pager, next",total:e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}}),t("el-dialog",{staticStyle:{"align-items":"center","justify-content":"center"},attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("h2",[e._v(e._s(e.currentUsername)+"作业详情")]),t("el-table",{staticClass:"submit-table",attrs:{border:"",data:e.userTableData}},[t("el-table-column",{attrs:{label:"温度",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[e._v(" "+e._s(a.row.temp)+" ℃ ")])]}}])}),t("el-table-column",{attrs:{label:"图片",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[null==a.row.imageUrl?t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("暂无提交")]):t("el-link",{staticClass:"el-upload__tip",attrs:{slot:"tip",type:"success",href:a.row.imageUrl,target:"_blank"},slot:"tip"},[e._v(e._s(a.row.imageName))])]}}])}),t("el-table-column",{attrs:{label:"视频",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[null==a.row.videoUrl?t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("暂无提交")]):t("el-link",{staticClass:"el-upload__tip",attrs:{slot:"tip",type:"primary"},on:{click:function(t){return e.handleViewVideo(a.row.videoUrl)}},slot:"tip"},[e._v(e._s(a.row.videoName))])]}}])})],1)],1),t("DialogVideo",{attrs:{"video-url":e.videoUrl,"video-dialog-visible":e.videoDialogVisible},on:{handleVideoDialog:e.handleVideoDialog}})],1)],1)},L=[],j=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{visible:this.$props.videoDialogVisible,"before-close":e.handleClose},on:{"update:visible":function(t){return e.$set(this.$props,"videoDialogVisible",t)}}},[t("video-player",{ref:"videoPlayer",staticClass:"vjs-custom-skin videoPlayer",attrs:{options:e.playerOptions,playsinline:!0}})],1)},F=[],Q={name:"DialogVideo",props:{videoUrl:null,videoDialogVisible:{type:Boolean,default:!1}},data(){return{dialogVisibleVideo:!1,playerOptions:{playbackRates:[.7,1,1.5,2],autoplay:!1,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"video/mp4",src:""}],poster:"",width:800,notSupportedMessage:"此视频暂无法播放，请稍后再试"}}},methods:{handleClose(){this.$emit("handleVideoDialog",!this.videoDialogVisible)}},watch:{videoUrl:{handler(e){this.playerOptions.sources[0].src=e}}}},M=Q,J=(0,f.Z)(M,j,F,!1,null,"73bf0c6d",null),Y=J.exports,Z={name:"Manage",components:{DialogVideo:Y},data(){return{forbid:!1,taskCount:7,tableData:[{id:null,name:null}],customColor:"#409eff",customColors:[{color:"#f56c6c",percentage:20},{color:"#e6a23c",percentage:40},{color:"#5cb87a",percentage:60},{color:"#1989fa",percentage:80},{color:"#6f7ad3",percentage:100}],userTableData:[],dialogVisible:!1,videoUrl:null,videoDialogVisible:!1,currentUsername:null,currentPage:1,pageSize:10,totalCount:0}},mounted(){this.getTaskCount(),this.getTableData(),this.timer=window.setInterval((()=>{setTimeout((()=>{this.getTableData(),console.log("刷新页面 -------------------")}),0)}),5e3)},destroyed(){window.clearInterval(this.timer)},methods:{getTableData(){let e={pageNum:this.currentPage,pageSize:this.pageSize};this.$axios.get(d.userList,{params:e}).then((e=>{200===e.data.code&&(console.log("res.data.data:",e.data.data),this.tableData=e.data.data.records,this.totalCount=e.data.data.total)}))},getTaskCount(){this.$axios.get(d.taskCount,{}).then((e=>{200===e.data.code&&(this.taskCount=e.data.data)}))},handleViewWork(e,t){this.currentUsername=t,this.$axios.get(d.getUserWorksByTeacher+e,{}).then((e=>{200===e.data.code&&(this.userTableData=e.data.data,this.userTableData.forEach((e=>{null!=e.imageUrl&&(e.imageName=e.imageUrl.substring(e.imageUrl.lastIndexOf("/")+1,e.imageUrl.length)),null!=e.videoUrl&&(e.videoList=[],e.videoName=e.videoUrl.substring(e.videoUrl.lastIndexOf("/")+1,e.videoUrl.length))})),this.dialogVisible=!0)}))},handleViewVideo(e){this.videoUrl=e,this.videoDialogVisible=!0},handleVideoDialog(e){this.videoDialogVisible=e},handleSizeChange(e){console.log(`每页 ${e} 条`),this.pageSize=e,this.getTableData()},handleCurrentChange(e){this.currentPage=e,this.getTableData(),console.log(`当前页: ${e}`)}}},G=Z,X=(0,f.Z)(G,B,L,!1,null,"6cdbdd00",null),W=X.exports;o["default"].use(k.ZP);const q=k.ZP.prototype.push;k.ZP.prototype.push=function(e){return q.call(this,e).catch((e=>e))};const K=new k.ZP({mode:"history",routes:[{path:"/",redirect:"/login/user"},{path:"/login/user",name:"LoginUser",component:R},{path:"/manage",name:"manage",component:W},{path:"/submit",name:"submit",component:O}],scrollBehavior(){return{x:0,y:0}}});K.beforeEach(((e,t,a)=>{if("/login/user"===e.path)return a();{const e=localStorage.getItem("Authorization");if(!e)return a("/login/user");a()}}));var $=K,H=a(8499),ee=a.n(H),te=a(6265),ae=a.n(te),oe=a(5595),se=a(4862),ie=a.n(se);a(7549),a(5489),o["default"].config.productionTip=!1,o["default"].prototype.$axios=ae(),o["default"].config.productionTip=!1,o["default"].use(ee()),o["default"].use(oe.Z),o["default"].use(ie()),ae().defaults.headers.post["Contenst-Type"]="application/json;",localStorage.getItem("Authorization")&&m.commit("set_token",localStorage.getItem("Authorization")),ae().interceptors.request.use((function(e){return m.state.token&&(e.headers.common["Authorization"]=m.state.token),e}),(function(e){return $.push("/login/user"),Promise.reject(e)})),ae().interceptors.response.use((function(e){return console.log("resp:",e),e}),(function(e){if(e.response)switch(e.response.status){case 401:m.commit("del_token"),$.push("/login/user")}return Promise.reject(e)})),new o["default"]({render:e=>e(C),router:$}).$mount("#app")},5893:function(){}},t={};function a(o){var s=t[o];if(void 0!==s)return s.exports;var i=t[o]={id:o,loaded:!1,exports:{}};return e[o].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}a.m=e,function(){var e=[];a.O=function(t,o,s,i){if(!o){var r=1/0;for(d=0;d<e.length;d++){o=e[d][0],s=e[d][1],i=e[d][2];for(var l=!0,n=0;n<o.length;n++)(!1&i||r>=i)&&Object.keys(a.O).every((function(e){return a.O[e](o[n])}))?o.splice(n--,1):(l=!1,i<r&&(r=i));if(l){e.splice(d--,1);var u=s();void 0!==u&&(t=u)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[o,s,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,o){var s,i,r=o[0],l=o[1],n=o[2],u=0;if(r.some((function(t){return 0!==e[t]}))){for(s in l)a.o(l,s)&&(a.m[s]=l[s]);if(n)var d=n(a)}for(t&&t(o);u<r.length;u++)i=r[u],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(d)},o=self["webpackChunkydjk"]=self["webpackChunkydjk"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=a.O(void 0,[998],(function(){return a(3526)}));o=a.O(o)})();
//# sourceMappingURL=app.4b05e24f.js.map